@echo off
chcp 65001 >nul

REM note SNSæŠ•ç¨¿æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ  èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (Windowsç‰ˆ)

REM ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /d "%~dp0"

echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo ğŸ“ note SNSæŠ•ç¨¿æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ 
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo ğŸš€ ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™...
echo.

REM Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
where node >nul 2>&1
if %ERRORLEVEL% NEQ 0 (
    echo âŒ ã‚¨ãƒ©ãƒ¼: Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“
    echo    https://nodejs.org/ ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„
    echo.
    pause
    exit /b 1
)

REM node_modulesãŒã‚ã‚‹ã‹ç¢ºèª
if not exist "node_modules" (
    echo ğŸ“¦ åˆå›èµ·å‹•: ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™...
    call npm install
    echo.
)

REM .envãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã‹ç¢ºèª
if not exist ".env" (
    echo âš ï¸  è­¦å‘Š: .envãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
    echo    .env.exampleã‚’ã‚³ãƒ”ãƒ¼ã—ã¦.envã‚’ä½œæˆã—ã¾ã™...
    copy .env.example .env >nul
    echo    âœ… .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸ
    echo.
    echo ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:
    echo    1. .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦APIèªè¨¼æƒ…å ±ã‚’è¨­å®šã—ã¦ãã ã•ã„
    echo    2. ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å†åº¦å®Ÿè¡Œã—ã¦ãã ã•ã„
    echo.
    pause
    notepad .env
    exit /b 0
)

echo âœ… æº–å‚™å®Œäº†
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã®URLã‚’é–‹ã„ã¦ãã ã•ã„:
echo    http://localhost:3000
echo.
echo â¹  åœæ­¢ã™ã‚‹ã«ã¯: Ctrl+C ã‚’æŠ¼ã—ã¦ãã ã•ã„
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

REM ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è‡ªå‹•çš„ã«é–‹ãï¼ˆ2ç§’å¾…æ©Ÿå¾Œï¼‰
timeout /t 2 /nobreak >nul
start http://localhost:3000

REM ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
call npm start
